<% user ||= @user %>
<%= form_with(model: current_user.active_relationships.build, local: false, class: "inline-block") do |f| %>
  <div><%= hidden_field_tag :followed_id, user.id, { id: SecureRandom.hex(4) } %></div>
  <% if @userprofile.present? %>
    <div><%= hidden_field_tag :userprofile_id, @userprofile.id, { id: SecureRandom.hex(4) } %></div>
  <% elsif params[:id].present? %>
    <div><%= hidden_field_tag :userprofile_id, params[:id],     { id: SecureRandom.hex(4) } %></div>
  <% else %>
    <div><%= hidden_field_tag :userprofile_id, current_user.id, { id: SecureRandom.hex(4) } %></div>
  <% end %>
  <%= f.submit "Follow", class: "btn btn-info btn-follow" %>
<% end %>